# 架构模式

## Skill 2.0 架构类型

### 工作流型（Workflow Type）
**适用场景**：多步骤任务、复杂流程

**结构特征**：
- workflow/ 目录：5-8 个显式步骤文件
- rules/ 目录：核心规则和要求
- references/ 目录：详细参考资料

**目录结构**：
```
skill-name/
├── SKILL.md (50-80行)
├── workflow/ (5-8个步骤)
│   ├── step1-阶段名.md
│   ├── step2-阶段名.md
│   └── ...
├── rules/ (2-4个规则)
├── references/ (3-5个参考)
├── templates/ (可选)
└── scripts/ (可选)
```

**优势**：
- 步骤清晰，线性执行
- 规则集中，易于查阅
- 按需加载，上下文高效

**示例**：xiaohongshu-ai-workflow

---

### 工具型（Utility Type）
**适用场景**：工具调用、API 封装

**结构特征**：
- workflow/ 目录：3-5 个步骤
- rules/ 目录：配置说明、使用规则
- references/ 目录：API 文档、项目结构
- scripts/ 目录：可执行脚本模板
- assets/ 目录：配置示例

**目录结构**：
```
skill-name/
├── SKILL.md (50-80行)
├── workflow/ (3-5个步骤)
├── rules/ (2-3个规则)
├── references/ (3-5个参考)
├── scripts/ (1-3个脚本)
└── assets/ (0-1个示例)
```

**优势**：
- 脚本模板可复用
- API 文档独立，不占用主上下文
- 配置说明清晰

**示例**：xhs-downloader

---

### 知识库型（Knowledge Base Type）
**适用场景**：静态知识、规则、参考资料

**结构特征**：
- references/ 目录：主要参考资料
- rules/ 目录（可选）：规则和要求
- workflow/ 目录：简单的使用步骤（1-3 个）

**目录结构**：
```
skill-name/
├── SKILL.md (50-80行)
├── workflow/ (1-3个步骤)
├── rules/ (可选)
└── references/ (3-10个参考)
```

**优势**：
- 知识分模块，易于查找
- 按需加载特定知识
- 维护简单

**示例**：xhs-copywriter

---

### 混合型（Hybrid Type）
**适用场景**：复杂系统，包含多种类型

**结构特征**：
- workflow/ 目录：流程步骤
- rules/ 目录：规则集
- references/ 目录：多种参考资料
- templates/ 目录：输出模板
- scripts/ 目录：工具脚本

**目录结构**：
```
skill-name/
├── SKILL.md (50-80行)
├── workflow/ (4-8个步骤)
├── rules/ (3-6个规则)
├── references/ (5-10个参考)
├── templates/ (2-4个模板)
└── scripts/ (1-3个脚本)
```

**优势**：
- 功能完整，覆盖全面
- 各模块清晰分离
- 高度可维护

---

## 选择指南

### 选择工作流型，如果：
- ✅ 有明确的多步骤流程
- ✅ 步骤之间有依赖关系
- ✅ 需要线性执行和完成标志
- ❌ 不是简单的工具调用

### 选择工具型，如果：
- ✅ 封装外部工具或 API
- ✅ 提供脚本模板供执行
- ✅ 需要配置说明
- ❌ 没有复杂的多步骤流程

### 选择知识库型，如果：
- ✅ 主要提供静态知识
- ✅ 按主题分模块
- ✅ 需要快速查阅特定知识
- ❌ 没有明显的执行流程

### 选择混合型，如果：
- ✅ 包含上述多种特征
- ✅ 需要全面的文档结构
- ✅ 有模板和脚本需求
- ❌ 不适合单一类型

## 架构原则总结

### ✅ 应该做的
1. **轻量级 SKILL.md**：50-80 行
2. **显式工作流**：每个步骤独立文件
3. **规则集中化**：rules/ 目录管理
4. **参考资料独立**：references/ 目录按需加载
5. **模板系统化**：templates/ 目录复用
6. **脚本可执行**：scripts/ 目录工具脚本

### ❌ 不应该做的
1. **单文件臃肿**：SKILL.md > 100 行
2. **工作流隐式**：步骤混在正文
3. **规则分散**：规则散在各处
4. **代码嵌入**：代码写在文档中
5. **无引用关系**：文件之间没有链接

## 快速决策树

```
判断 skill 类型
├─ 多步骤复杂流程？ → 工作流型
├─ 工具/API 封装？ → 工具型
├─ 静态知识库？ → 知识库型
└─ 包含多种特征？ → 混合型
```

根据这个决策树快速选择合适的架构模式。
