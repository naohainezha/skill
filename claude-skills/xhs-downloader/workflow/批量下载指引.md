# 批量下载博主笔记

## 概述

当你需要下载一个博主的**多篇笔记**时，请使用 **xhs-batch-downloader** 工具。

**本工具 (xhs-downloader) 的限制**：
- 只能下载单条作品（需要具体的作品链接）
- 不支持通过博主ID批量获取作品列表

**xhs-batch-downloader 的优势**：
- 支持博主ID直接下载
- 自动获取博主的所有笔记列表
- 支持设置下载数量（如10篇、20篇）
- 智能去重和断点续传

---

## 快速开始

### 1. 确认使用场景

用户说：
- ✅ "下载博主ID xxx 的10篇笔记" → 使用 xhs-batch-downloader
- ✅ "批量下载这个博主" → 使用 xhs-batch-downloader
- ❌ "下载这个链接" → 使用 xhs-downloader（本工具）

### 2. 执行批量下载

```bash
# 进入批量下载工具目录
cd C:\Users\admin\Projects\xhs-batch-downloader

# 下载指定博主的10篇笔记
python cli.py download <博主ID> --count 10

# 示例
python cli.py download 644ccb7700000000120342d8 --count 10
```

### 3. 首次使用需登录

```bash
# 检查登录状态
python cli.py status

# 如未登录，执行登录
python cli.py login
# 然后使用小红书APP扫描二维码
```

---

## 完整命令参考

```bash
# 添加博主（可选，用于管理）
python cli.py add <博主ID> --alias "博主别名"

# 下载指定数量
python cli.py download <博主ID> --count 10

# 下载全部笔记
python cli.py download <博主ID> --all

# 强制重新下载（忽略已下载记录）
python cli.py download <博主ID> --count 10 --force
```

---

## 常见问题

### Q: 为什么 xhs-downloader 不支持批量下载？
A: xhs-downloader 基于 XHS-Downloader 项目，设计初衷是下载单条作品。批量下载需要调用小红书API获取博主作品列表，这需要登录和签名，xhs-batch-downloader 专门处理这个场景。

### Q: 两个工具下载的文件有区别吗？
A: 没有区别。两个工具都使用相同的下载引擎，文件保存位置相同：
`C:\Users\admin\Projects\XHS-Downloader\Volume\Download\`

### Q: 批量下载后如何筛选素材？
A: 下载完成后，使用 xhs-image-filter 进行人脸检测筛选：
```bash
cd C:\Users\admin\Projects\xhs-image-filter
python cli.py filter "C:\Users\admin\Projects\XHS-Downloader\Volume\Download" --output "./output" --min-ratio 0.02
```

---

## 完整工作流示例

```bash
# 1. 批量下载博主笔记
cd C:\Users\admin\Projects\xhs-batch-downloader
python cli.py download 644ccb7700000000120342d8 --count 10

# 2. 筛选人脸素材
cd C:\Users\admin\Projects\xhs-image-filter
python cli.py filter "C:\Users\admin\Projects\XHS-Downloader\Volume\Download" --output "./output" --min-ratio 0.02

# 3. 使用ComfyUI洗图
cd C:\Users\admin\Projects\xhs-comfyui-wash
python wash_submit_only.py "Z_kuanlian_000001140.safetensors" 0.8
```
