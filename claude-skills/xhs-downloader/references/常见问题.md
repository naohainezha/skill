# 常见问题

## 1. 依赖安装失败

**问题**：安装 `rookiepy` 模块失败，提示需要 Rust 编译环境。

**原因**：`rookiepy` 需要 Rust 编译器。

**解决方案**：
- `rookiepy` 已修改为可选依赖
- 不影响核心下载功能
- 可以忽略此依赖错误

## 2. MCP 服务器启动失败

**问题**：MCP 模式无法启动。

**解决方案**：
- MCP 模式为可选功能
- 可以直接使用 Python API 调用
- 参考 [workflow/step2-执行下载.md](../workflow/step2-执行下载.md)

## 3. 下载文件已存在

**问题**：重复下载同一作品，提示"已跳过"。

**原因**：程序默认启用下载记录。

**解决方案**：
- 如需重新下载，删除数据库记录
- 数据库位置：`C:\Users\admin\Projects\XHS-Downloader\Volume\ExploreID.db`
- 删除对应作品ID的记录

## 4. 文件名乱码

**问题**：下载的文件名显示为乱码。

**原因**：系统终端不支持 UTF-8 编码。

**解决方案**：
- Windows 10/11 默认支持 UTF-8
- 确认终端编码设置
- PowerShell 通常无需额外配置

## 5. 下载速度慢

**问题**：下载大视频或大量图片时速度慢。

**可能原因**：
- 网络带宽限制
- 目标服务器限速
- 下载任务过多

**解决方案**：
- 减少并发下载任务
- 检查网络连接
- 尝试在网络空闲时段下载

## 6. 作品链接失效

**问题**：提示"作品不存在"或"链接无效"。

**可能原因**：
- 作品已被删除
- 作品ID输入错误
- 作品被设置为私密

**解决方案**：
- 确认链接完整且正确
- 在浏览器中打开链接验证
- 联系作品发布者确认

## 7. 下载位置找不到

**问题**：下载完成后找不到文件。

**解决方案**：
- 默认位置：`C:\Users\admin\Projects\XHS-Downloader\Volume\Download\`
- 检查配置文件 `settings.json` 中的 `work_path`
- 搜索文件名：使用 Windows 文件搜索功能

## 8. 视频无法播放

**问题**：下载的视频无法播放。

**可能原因**：
- 视频编码不兼容
- 文件损坏
- 播放器不支持

**解决方案**：
- 使用 VLC 播放器（兼容性强）
- 重新下载视频
- 检查文件大小是否正常

## 9. 图片格式不支持

**问题**：下载的图片无法打开。

**解决方案**：
- 默认格式为 PNG
- 可在配置中修改为 JPEG/WEBP/HEIC
- 参考 [rules/配置说明.md](../rules/配置说明.md)

## 10. 高级选项

**问题**：如何使用高级选项？

**解决方案**：
- 修改脚本模板中的参数
- 使用 `index` 参数指定图片序号
- 设置 `download=False` 仅获取信息
- 参考 [references/API参考.md](../references/API参考.md)
